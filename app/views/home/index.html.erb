<h1>Home#index</h1>

<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"></script>

<%= form_tag(services_location_path, method: "get") do %>
<div class="row">
  <div class="input-group">
    <%= label_tag(:locationTextField, "Location", class: 'col-xs-1 col-md-1') %>
    <%= text_field_tag :locationTextField, "", class: 'form-control col-md-2', placeholder: 'hehe' %>
  </div>
</div>
<div class="row">
    <div class="input-group col-md-2">
      <%= text_field_tag :searchInput, "", class: 'form-control', placeholder: 'Search for...' %>
      <span class="input-group-btn">
        <%= submit_tag("Search", class:'form-control') %>
      </span>
    </div><!-- /input-group -->

</div>
<% end %>
<script>
  var placeSearch, autocomplete;
  var componentForm = {
    street_number: 'short_name',
    route: 'long_name',
    locality: 'long_name',
    administrative_area_level_1: 'short_name',
    country: 'long_name',
    postal_code: 'short_name'
  };

  function initAutocomplete() {
    // Create the autocomplete object, restricting the search to geographical
    // location types.
    autocomplete = new google.maps.places.Autocomplete(
        /** @type {!HTMLInputElement} */(document.getElementById('locationTextField')),
        {types: ['geocode']});

    // When the user selects an address from the dropdown, populate the address
    // fields in the form.
    autocomplete.addListener('place_changed', fillInAddress);
  }

  function fillInAddress() {
    // Get the place details from the autocomplete object.
    var place = autocomplete.getPlace();
    console.log(place);

  }

  $( document ).ready(init() );
  // Handler for .ready() called
  function init() {
    var input = document.getElementById('locationTextField');
    var autocomplete = new google.maps.places.Autocomplete(input);
  }

  google.maps.event.addDomListener(window, 'load', init);
</script>
